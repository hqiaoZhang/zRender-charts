/**
 * @Author:      zhanghq
 * @DateTime:    2017-12-26 17:34:00
 * @Description: Description
 * @Last Modified By:   zhanghq
 * @Last Modified Time:    2017-12-26 17:34:00
 */

import '../index.css'
import { fetch } from '@/util/request'
import { RectBar, BasePie,
  SameRingRation } from '@/charts/index'

import TimeAxis from '@/components/timeAxis' 

export default class Charts {
  /**
   *  构造函数
   */
  constructor() {
    this.rectBar = new RectBar('.rectbar')
    this.basePie = new BasePie('.basePie')
    this.sameRingRation = new SameRingRation('.sameRingRation')
    // this.earth = new Earth('#earth')
    // 时间轴
    this.timeAxis = new TimeAxis('.select-time')
   // this.map = new BaseMap('.map')
  }

  render() {
    const self = this
    // self.earth.render() // 地球
    self.timeAxis.render()
    fetch('fetchCharts', data => {
      self.rectBar.render(data)
      self.basePie.render(data)
    })

    // 同环比
    fetch('fetchThb', data => {
      self.sameRingRation.render(data)
    })
    // self.map.render()
    // self.times()
  }

  times() {
    const self = this
    setInterval(() => {
      self.render()
    }, 5000)
  }
}
